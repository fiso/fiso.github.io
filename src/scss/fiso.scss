@import "variables";
@import "fonts";
@import "mixins";

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

a {
  text-decoration: none;
}

h1 {
  font-size: $big-font-size;
  font-weight: normal;
  margin-bottom: $spacing;
}

p {
  line-height: $base-line-height;
}

.appear {
  opacity: 0;
  transition: 900ms opacity ease-in-out, 900ms transform ease-in-out;

  &.appearing,
  &.appeared {
    opacity: 1;
  }
}

img {
  &.lazy {
    opacity: 0;
    transition: 900ms opacity ease-in-out;

    &.loaded {
      opacity: 1;
    }
  }
}

button {
  background-color: $dark-gray;
  border: 0;
  outline: none;
  cursor: pointer;
  transition: transform 900ms 500ms ease-in-out, opacity 900ms 500ms ease-in-out;
}

.progressbar {
  border-radius: 100px;
  background-color: $black;
  color: $white;
  padding: .5em 1.5em;
  margin-bottom: .3em;
  position: relative;
  overflow: hidden;
  border: 1px solid $black;

  &.appear {
    span {
      max-width: 0;
    }
  }

  &.appearing,
  &.appeared {
    span {
      max-width: 100%;
    }
  }

  span {
    position: absolute;
    right: 0;
    background-color: $white;
    height: 100%;
    top: 0;
    transition: width 1000ms ease-in-out, max-width 1000ms ease-in-out;
  }
}

body {
  min-height: 100vh;
  overflow-x: hidden;
  color: $black;
  font-size: $base-font-size;
  font-family: $standard-font;
  padding-top: $header-height;

  > footer,
  > header {
    padding: $spacing;
  }

  > header {
    position: fixed;
    top: 0;
    width: 100%;
    background-color: $black;
    height: $header-height;
    z-index: 1;
  }

  > footer {
    min-height: $gutter-size;
    background-color: $light-gray;
  }

  .sections {
    position: relative;

    .timeline {
      width: $gutter-size;
      height: 100%;
      position: absolute;
      right: 0;
      top: 0;
      text-align: right;
      padding: 0 $spacing;
      overflow: hidden;

      ul {
        list-style: none;
        text-align: center;

        li {
          &:not(:last-child) {
            &::after {
              content: " ";
              width: 4px;
              height: 38px;
              background-color: $light-gray;
              display: block;
              margin: 4px auto 4px 48%;
            }
          }
        }
      }
    }

    section {
      width: calc(100vw - #{$gutter-size} - #{$spacing});
    }
  }

  > section,
  .sections section { // sass-lint:disable-line force-element-nesting
    min-height: calc(100vh - #{$header-height});
    margin-bottom: $gutter-size;
    background-color: $light-gray;
    padding: $spacing;
    overflow: hidden;
    position: relative;

    &.hero {
      min-height: auto;
      text-align: right;
      overflow: visible;

      > * {
        padding-right: 50%;
      }

      h1 {
        margin-top: $gutter-size * 1.5;
        font-size: 60px;

        &.alternate {
          color: $red;
          position: absolute;
          top: $spacing;
          width: 100%;
          left: 0;
          z-index: 2;
          transition: 300ms 1200ms opacity ease-in-out;

          &.intro {
            opacity: 0;
          }
        }
      }

      p {
        margin-bottom: $gutter-size * 1.5;
      }

      img {
        position: absolute;
        left: 50%;
        bottom: 0;
        padding: 0;
        opacity: 1;
        transform: scaleX(-1) scale(10);
        transition: 1000ms 500ms transform ease-in-out;
        height: 100%;
        z-index: 1;

        &.loaded {
          transform: scaleX(-1);
        }
      }
    }
  }
}
